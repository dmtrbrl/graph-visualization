(function(e){function t(t){for(var i,s,o=t[0],l=t[1],c=t[2],h=0,u=[];h<o.length;h++)s=o[h],r[s]&&u.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2c07":function(e,t,n){"use strict";var i=n("f713"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("GraphVisualization")],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"graph"},[n("h1",{staticClass:"graph-heading"},[e._v("\n    Graph Visualization\n  ")]),e._m(0),e.graph.nodes?n("svg",{staticClass:"graph-svg",attrs:{width:e.width,height:e.height,xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("pattern",{attrs:{id:"innerGrid",width:e.innerGridSize,height:e.innerGridSize,patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"100%",height:"100%",fill:"none",stroke:"#eeeeee8a","stroke-width":"0.5"}})]),n("pattern",{attrs:{id:"grid",width:e.gridSize,height:e.gridSize,patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"100%",height:"100%",fill:"url(#innerGrid)",stroke:"#eeeeee8a","stroke-width":"1.5"}})])])]):e._e(),n("div",{staticClass:"graph-counter"},[e._v("\n    "+e._s(e.graph.nodes.length)+" nodes / "+e._s(e.graph.links.length)+" edges\n  ")]),n("div",{staticClass:"graph-controls"},[n("a",{attrs:{href:"#randomize"},on:{click:function(t){return t.preventDefault(),e.generateRandomGraph(t)}}},[e._v("Randomize")]),e._v(" \n    / \n    "),n("label",{staticClass:"graph-upload"},[e._v("\n      Upload JSON file\n      "),n("input",{ref:"fileInput",attrs:{type:"file",accept:"application/JSON"},on:{change:e.loadTextFromFile}})])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"graph-github"},[n("a",{attrs:{href:"#"}},[e._v("Show on Github")])])}],l=n("cebc"),c=(n("ac6a"),n("b54a"),n("5698")),d=n("5d73"),h=n.n(d),u=(n("6b54"),function(){return Math.random().toString(36).substring(7)}),f=function(e){return{id:e,name:u()}},g=function(e,t){var n=Math.floor(Math.random()*(t-e+1)+e),i=Array.apply(null,{length:n}).map(function(e,t){return f(t)});return i},p=function(e,t,n){return{id:e,source:t,target:n}},v=function(e,t){var n=[],i=0,r=!0,a=!1,s=void 0;try{for(var o,l=h()(e);!(r=(o=l.next()).done);r=!0)for(var c=o.value,d=Math.floor(Math.random()*t),u=0;u<=d;u++){var f=Math.floor(Math.random()*e.length),g=c.id;i++,n.push(p(i,g,f))}}catch(v){a=!0,s=v}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}return n},m=(n("6762"),n("2fdb"),n("2d7d")),w=n.n(m),x=n("b6d0"),S=n.n(x),y=function(e,t){e.set(t,{in:new S.a,out:new S.a})},b=function(e,t,n){e.get(t).out.add(n),e.get(n).in.add(t)},k=function(e){return e.reduce(function(e,t){var n=t.source,i=t.target;return e.has(n)||y(e,n),e.has(i)||y(e,i),b(e,n,i),b(e,i,n),e},new w.a)},N=function(e,t){var n=[];while(t.has(e)){var i=t.get(e);n.push({source:i,target:e}),e=i}return n.reverse()},_=function(e,t,n){var i=k(n);if(!i.has(e))throw new Error("Unknown source.");if(!i.has(t))throw new Error("Unknown target.");var r=[e],a=new S.a,s=new w.a;while(r.length>0){var o=r.shift();if(o.index===t.index)return N(o,s);var l=!0,c=!1,d=void 0;try{for(var u,f=h()(i.get(o).out);!(l=(u=f.next()).done);l=!0){var g=u.value;a.has(g)||(r.includes(g)||(s.set(g,o),r.push(g)))}}catch(p){c=!0,d=p}finally{try{l||null==f.return||f.return()}finally{if(c)throw d}}a.add(o)}return null},z={name:"GraphVisualization",data:function(){return{width:null,height:null,d3Selections:{},simulation:null,gridSize:100,gridMargin:100,forceProperties:{center:{x:.5,y:.5},charge:{enabled:!0,strength:-100,distanceMin:50,distanceMax:250},link:{enabled:!0,distance:50,iterations:1}},graph:{nodes:[],links:[]},selectedNodes:[],selectedPaths:[]}},computed:{innerGridSize:function(){return this.gridSize/10}},methods:{handleResize:function(){this.width=window.innerWidth,this.height=window.innerHeight},initForceSimulation:function(){this.simulation=c["f"]().force("link",c["d"](this.graph.links).id(function(e){return e.id})).force("charge",c["e"]()).force("center",c["c"]()).on("tick",this.onTick),this.updateForces()},initD3Selections:function(){this.d3Selections.svg=c["g"](this.$el.querySelector("svg")),this.d3Selections.grid=this.d3Selections.svg.append("rect").attr("x","-10%").attr("y","-10%").attr("width","410%").attr("height","410%").attr("fill","url(#grid)"),this.d3Selections.graph=this.d3Selections.svg.append("g")},initZoom:function(){this.zoom=c["h"]().scaleExtent([.7,4]).on("zoom",this.onZoom),this.d3Selections.svg.call(this.zoom)},resetZoom:function(){this.d3Selections.svg.transition().duration(750).call(this.zoom.transform,c["i"])},generateRandomGraph:function(){var e=g(100,200),t=v(e,2);this.graph={nodes:e,links:t}},updateData:function(){this.selectedNodes=[],this.simulation.nodes(this.graph.nodes),this.simulation.force("link").links(this.graph.links);var e=this.simulation,t=this.d3Selections.graph;t.selectAll("*").remove(),t.selectAll("path").data(e.force("link").links()).enter().append("path").exit().remove(),t.selectAll("circle").data(e.nodes()).enter().append("circle").attr("r",5).on("click",this.onNodeClick).call(c["a"]().on("start",this.onNodeDragStarted).on("drag",this.onNodeDragged).on("end",this.onNodeDragEnded)).exit().remove(),e.alpha(1).restart(),this.resetZoom()},updateForces:function(){var e=this.simulation,t=this.forceProperties,n=this.width,i=this.height;e.force("center").x(n*t.center.x).y(i*t.center.y),e.force("link").distance(t.link.distance).iterations(t.link.iterations),e.alpha(1).restart()},highlightSelectedNodes:function(){var e=this,t=this.d3Selections.graph.selectAll("circle");this.selectedNodes.length?t.classed("selected",!1).filter(function(t){return-1!==e.selectedNodes.indexOf(t)}).classed("selected",!0):t.classed("selected",!1)},findPathsBetweenNodes:function(){if(2===this.selectedNodes.length){var e=_(this.selectedNodes[0],this.selectedNodes[1],this.graph.links);this.selectedPaths=e||[]}else this.selectedPaths=[]},highlightSelectedPaths:function(){var e=this;this.selectedPaths.length?this.selectedPaths.forEach(function(t){e.d3Selections.graph.selectAll("path").classed("path",!0).filter(function(e){return(e.source.index==t.source.index||e.source.index==t.target.index)&&(e.target.index==t.target.index||e.target.index==t.source.index)}).classed("selected",!0)}):this.d3Selections.graph.selectAll("path").classed("path",!1).classed("selected",!1)},onTick:function(){var e=function(e){return"translate(".concat(e.x,", ").concat(e.y,")")},t=function(e){return"M".concat(e.source.x,",").concat(e.source.y," L").concat(e.target.x,",").concat(e.target.y)},n=this.d3Selections.graph;n.selectAll("path").attr("d",t),n.selectAll("circle").attr("transform",e)},onZoom:function(){var e=c["b"].transform,t="".concat(e.x%(this.gridSize*e.k),", ").concat(e.y%(this.gridSize*e.k));this.d3Selections.graph.attr("transform",e),this.d3Selections.grid.attr("transform","translate(".concat(t,") scale(").concat(e.k,")")),this.d3Selections.graph.attr("transform",e);var n=this.d3Selections.graph.node().getBBox(),i=[n.x-this.gridMargin,n.y-this.gridMargin],r=[n.x+n.width+this.gridMargin,n.y+n.height+this.gridMargin];this.zoom.translateExtent([i,r])},onNodeDragStarted:function(e){c["b"].active||this.simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y},onNodeDragged:function(e){e.fx=c["b"].x,e.fy=c["b"].y},onNodeDragEnded:function(e){c["b"].active||this.simulation.alphaTarget(1e-4),e.fx=null,e.fy=null},onNodeClick:function(e){if(this.graph.links.length){var t=this.selectedNodes.indexOf(e);-1!==t?this.selectedNodes.splice(t,1):2==this.selectedNodes.length&&-1==t?this.selectedNodes=[e]:this.selectedNodes.push(e)}},loadTextFromFile:function(e){var t=this,n=e.target.files[0],i=new FileReader;i.onload=function(e){t.parseLoadedTextFromFile(e.target.result),t.$refs.fileInput.value=null},i.readAsText(n)},parseLoadedTextFromFile:function(e){var t;try{t=JSON.parse(e)}catch(n){return void console.error("Invalid file format")}t.nodes&&t.links&&t.nodes.length&&t.nodes[0].id?this.graph=Object(l["a"])({},t):console.error("Invalid data format")}},watch:{graph:{handler:function(e){this.updateData()},deep:!0},selectedNodes:{handler:function(e){this.highlightSelectedNodes(),this.findPathsBetweenNodes()},deep:!0},selectedPaths:{handler:function(e){this.highlightSelectedPaths()},deep:!0}},mounted:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),this.initForceSimulation(),this.initD3Selections(),this.initZoom(),this.generateRandomGraph()}},M=z,O=(n("2c07"),n("2877")),P=Object(O["a"])(M,s,o,!1,null,null,null);P.options.__file="GraphVisualization.vue";var G=P.exports,F={name:"app",components:{GraphVisualization:G}},T=F,j=(n("5c0b"),Object(O["a"])(T,r,a,!1,null,null,null));j.options.__file="App.vue";var A=j.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(A)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("5e27"),r=n.n(i);r.a},"5e27":function(e,t,n){},f713:function(e,t,n){}});
//# sourceMappingURL=app.0fc9b498.js.map